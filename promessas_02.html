<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>p2</title>
    <link rel="stylesheet" href="highlight.css">
    <script src="highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad()</script>
    <script defer>
      let moedaLancar
      const moeda = new Promise(moedaValor => {
        moedaLancar = () => {
          moedaValor(Math.random() > 0.5 ? 'cara' : 'coroa')
        }
      })
      const coroa = moeda.then(m => m === 'coroa' ? m : Promise.reject('cara'))
    </script>
    <style>
      body {
      	text-align: center;
      	margin: 0 auto;
      	max-width: 600px;
      	padding-top: 2em;
      	padding-bottom: 2em;
      }
      code {
      	text-align: left;
      	margin: 2em 0;
      }
      textarea {
        width: 100%;
        height: 12em;
      }
    </style>
  </head>
  <body>
    <h1>LANÃ‡AMENTOS DE MOEDAS</h1>
    <hr>
<pre><code class="javascript">const coroa = moeda.then(
   m => m === 'coroa' ? m : Promise.reject('cara')
)

// tunel do tempo

coroa.then(console.log)
  .then(console.log)
  .then(console.log)
  .then(console.log)

coroa.then(c => c + "e")
  .then(c => c + "i")
  .then(c => c + "o")
  .then(c => c + "u")
  .then(console.log)

const duasCoroas = coroa.then(c => c + ' ' + c)

duasCoroas.then(c => c + "e")
  .then(c => c + "i")
  .then(c => c + "o")
  .then(c => c + "u")
  .then(console.log)

const oitoCoroas = duasCoroas.then(
  cc => cc + ' ' + cc + ' ' + cc + ' ' + cc
).then(console.log)

const revolucaoFrancesa = oitoCoroas.then(
  monarquia => Promise.reject('monarquia')
)
</code></pre>
  <textarea>coroa.catch(console.error)
moedaLancar()</textarea>
  </body>
</html>
